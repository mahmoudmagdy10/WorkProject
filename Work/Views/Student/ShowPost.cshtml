@model Work.BL.Models.PostVM

@inject Work.BL.Interface.IPostRep PostRep;
@inject Work.BL.Interface.IReplyRep ReplyRep;

@{
    ViewData["Title"] = "Post";
    var UserId = TempData["UserId"];
    var PostId = ViewBag.PostId;
}

@section css
    
{
    <link rel="stylesheet" href="~/assets/css/ReplayQueryAndComment.css">

    <style>
        .link-muted {
            color: #aaa;
        }

            .link-muted:hover {
                color: #1266f1;
            }
    </style>
}

<div class="container ">
    <div class="container py-5">

        <div class="row">

            <div class="col-lg-12 d-flex align-items-center containerEnquery position-relative">
                <div class="">
                    <div class="DataOfPersoneOfGraduated position-absolute start-0 d-flex">
                        <img src="~/assets/images/student.jpg" alt="" class="rounded-circle" width="50" height="50">
                        <h5 class="text-black mx-2">@Model.UserEmail</h5>
                    </div>
                </div>

                <div class="container-fluid  ">
                    <div class="row w-100">
                        <div class="col-lg-12">
                            <button class="btn-bg-main btn text-left"><a asp-controller="Specialist" asp-action="Index" asp-route-UserId="@UserId" class="text-white text-decoration-none">Back</a></button>

                            <div class="PostDescription  text-center">
                                @Model.Content
                            </div>
                        </div>

                        <div class="col-lg-12 m-auto w-75">
                            <div>
                                <form asp-controller="Specialist" asp-action="AddReply">
                                    <div class="input-group mb-3">

                                        <input type="hidden" class="form-control" name="UserId" value="@UserId">
                                        <input type="hidden" class="form-control" name="PId" value="@Model.Id">
                                        <input type="hidden" class="form-control" name="UserEmail" value="@User.Identity.Name">

                                        <textarea type="text" class="form-control" name="Content" placeholder="Add Comment ..."
                                            aria-label="Example text with button addon"
                                            aria-describedby="button-addon1" rows="1"></textarea>
                                        <input class="btn btn-main-color" type="submit" id="button-addon1" value="Send Replay">

                                    </div>
                                </form>
                            </div>

                        </div>

                        <div class="col-lg-12 radius-32 p-lg-3 p-sm-0" id="commentConatiner">
                            <div class="container-fluid p-0">
                                <div class="row">

                                    @foreach (var reply in ReplyRep.Get().Where(a => a.PId == PostId))
                                    {
                                
                                        <div class="col-lg-12 my-lg-1">
                                        <div
                                            class= "bg-white d-flex justify-content-between align-items-center radius-32 text-black">
                                            <div class="w-25 text-center">
                                                <img src="~/assets/images/Eich.jpg" alt="" class="rounded-circle" width="50px">
                                                <p>@reply.UserEmail</p>
                                                <p style="color:#0000008a">@reply.CreatedAt</p>
                                            </div>
                                            <div class="w-75 text-center" style="background-color: #b97e1926; border-radius: 40px;">
                                                <p class="">@reply.Content</p>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

